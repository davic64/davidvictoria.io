---
const activeClasses = [
  "bg-yellow-500",
  "text-black",
  "shadow-[0_0_20px_rgba(250,204,21,0.5)]",
];
const inactiveClasses = [
  "bg-white/5",
  "text-gray-400",
  "hover:text-white",
  "hover:bg-white/10",
];

const baseClasses =
  "tab-btn px-4 md:px-6 py-2 rounded-xl text-xs font-bold uppercase tracking-wide whitespace-nowrap transition-all duration-300";
---

<div class="flex justify-center">
  <div
    class="rounded-2xl p-2 border border-white/5 bg-white/1 backdrop-blur-2xl flex flex-wrap justify-center gap-2 max-w-[95vw]"
  >
    <button class:list={[baseClasses, activeClasses]} data-tag="">Todos</button>
    <button class:list={[baseClasses, inactiveClasses]} data-tag="general"
      >General</button
    >
    <button class:list={[baseClasses, inactiveClasses]} data-tag="software"
      >Software</button
    >
  </div>
</div>

<script define:vars={{ activeClasses, inactiveClasses }}>
  const buttons = document.querySelectorAll(".tab-btn");

  buttons.forEach((button) => {
    button.addEventListener("click", () => {
      // Remove active classes from all buttons and add inactive classes
      buttons.forEach((btn) => {
        btn.classList.remove(...activeClasses);
        btn.classList.add(...inactiveClasses);
      });

      // Add active classes to clicked button and remove inactive classes
      button.classList.remove(...inactiveClasses);
      button.classList.add(...activeClasses);

      // Dispatch event with selected tag
      const tag = button.getAttribute("data-tag");
      const event = new CustomEvent("filter-change", {
        detail: { tag },
        bubbles: true,
      });
      button.dispatchEvent(event);
    });
  });
</script>
