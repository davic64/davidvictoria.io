---
import { CalendarIcon, ChevronRightIcon, ClockIcon } from "@lucide/astro";
import Avatar from "./Avatar.astro";
import Badge from "./Badge.astro";
import type { Post } from "../../lib/hashnode";

interface Props {
  post: Post;
}

const { post } = Astro.props;

const formatDate = (dateString: string) => {
  return new Date(dateString).toLocaleDateString("es-ES", {
    day: "2-digit",
    month: "2-digit",
    year: "numeric",
  });
};
---

<a
  href={`/post/${post.slug}`}
  class="group relative w-full bg-card border border-white/5 hover:border-white/10 rounded-3xl overflow-hidden transition-all duration-500 cursor-pointer grid grid-cols-1 md:grid-cols-2 shadow-2xl"
>
  <div
    class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-700 pointer-events-none bg-[radial-gradient(circle_at_50%_50%,rgba(250,204,21,0.08),transparent_70%)]"
  >
  </div>
  <div class="relative h-64 md:h-full overflow-hidden">
    <div class="flex gap-2 absolute top-4 left-4 z-10">
      <Badge variant="glow" color="primary" text="Nuevo" />
      {
        post.tags && post.tags.length > 0 ? (
          post.tags.slice(0, 2).map((tag) => <Badge text={tag.name} />)
        ) : (
          <Badge text="General" />
        )
      }
    </div>
    <img
      src={post.coverImage.url}
      alt={post.title}
      class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-1000 ease-out"
    />
  </div>
  <div class="p-6 md:p-12 flex flex-col justify-center">
    <h2
      class="text-2xl md:text-4xl lg:text-5xl font-bold text-white mb-6 leading-[1.1]"
    >
      {post.title}
    </h2>
    <p
      class="text-gray-400 text-base md:text-lg mb-8 line-clamp-3 md:line-clamp-4 leading-relaxed"
    >
      {post.brief}
    </p>
    <div
      class="flex flex-wrap items-center justify-between gap-4 border-t border-white/5 pt-6"
    >
      <div class="flex items-center gap-4">
        <Avatar src={post.author.profilePicture} alt={post.author.name} />
        <div class="flex flex-col gap-1">
          <p class="text-sm font-medium">{post.author.name}</p>
          <div class="flex items-center gap-3 text-xs text-gray-500">
            <span class="flex items-center gap-1">
              <CalendarIcon size={12} />
              {formatDate(post.publishedAt)}
            </span>
            <span class="flex items-center gap-1">
              <ClockIcon size={12} />
              {post.readTimeInMinutes} min
            </span>
          </div>
        </div>
      </div>
      <div
        class="w-10 h-10 rounded-full border border-white/10 bg-white/5 flex items-center justify-center group-hover:bg-yellow-500 group-hover:text-black group-hover:border-yellow-500 transition-all duration-300 transform group-hover:translate-x-1"
      >
        <ChevronRightIcon size={20} />
      </div>
    </div>
  </div>
</a>
